(function(){"use strict";var e={1364:function(e,t,r){var n=r(9242),a=r(3396);function i(e,t,r,n,i,o){const u=(0,a.up)("navigation-links"),l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(u),(0,a.Wm)(l)],64)}var o=r(65);const u={class:"nav"},l=(0,a.Uk)("Список валют"),s=(0,a.Uk)("Конвертер");function c(e,t){const r=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",u,[(0,a.Wm)(r,{to:"/"},{default:(0,a.w5)((()=>[l])),_:1}),(0,a.Wm)(r,{to:"/converter"},{default:(0,a.w5)((()=>[s])),_:1})])}var v=r(89);const p={},d=(0,v.Z)(p,[["render",c]]);var m=d,f={components:{NavigationLinks:m},setup(){(0,a.bv)((()=>(0,o.oR)().dispatch("loadValute")))}};const h=(0,v.Z)(f,[["render",i]]);var g=h,w=r(2483);const C={class:"list"};function _(e,t,r,n,i,o){const u=(0,a.up)("list-search"),l=(0,a.up)("CurrencyItem");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(u),(0,a._)("div",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.items,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e.ID,item:e},null,8,["item"])))),128))])],64)}var b=r(7139);const y={class:"item list__item"},F={class:"item__title"},R={class:"item__value"},V={class:"item__value"};function D(e,t,r,n,i,o){return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("p",F,(0,b.zw)(r.item.Name),1),(0,a._)("span",R,"1 "+(0,b.zw)(n.leftCode),1),(0,a._)("button",{class:"item__btn",onClick:t[0]||(t[0]=(...e)=>n.togleReverse&&n.togleReverse(...e))}),(0,a._)("span",V,(0,b.zw)(n.value)+" "+(0,b.zw)(n.rightCode),1),0!==n.prevValue?((0,a.wg)(),(0,a.iD)("span",{key:0,class:(0,b.C_)(["item__title",n.prevClasses])},(0,b.zw)(n.prevValue),3)):(0,a.kq)("",!0)])}var U=r(4870),k={props:{item:{type:Object,required:!0}},setup(e){const t=(0,U.iH)(!1),r=(0,U.iH)(e.item.value>e.item.prevValue),n=()=>{t.value=!t.value,r.value=!r.value},i=(0,a.Fl)((()=>t.value?"RUR":e.item.CharCode)),o=(0,a.Fl)((()=>t.value?e.item.CharCode:"RUR")),u=(0,a.Fl)((()=>t.value?e.item.ratio:e.item.value)),l=(0,a.Fl)((()=>t.value?Math.abs((e.item.ratio-e.item.prevRatio).toFixed(4)):Math.abs((e.item.value-e.item.prevValue).toFixed(4)))),s=(0,a.Fl)((()=>r.value?"list__item-up":"list__item-down"));return{leftCode:i,togleReverse:n,rightCode:o,value:u,prevValue:l,prevClasses:s}}};const L=(0,v.Z)(k,[["render",D]]);var x=L;const O={class:"search"};function P(e,t,r,i,o,u){return(0,a.wg)(),(0,a.iD)("div",O,[(0,a.wy)((0,a._)("input",{class:"search__input",onInput:t[0]||(t[0]=(...e)=>i.searchItems&&i.searchItems(...e)),type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),placeholder:"Начать поиск..."},null,544),[[n.nr,i.value]])])}function j(e,t){let r;return(...n)=>{clearTimeout(r),r=setTimeout((()=>{e.apply(this,n)}),t)}}var N={setup(){const e=(0,o.oR)(),t=(0,U.iH)("");function r(){e.dispatch("list/filterList",t.value)}const n=j((()=>{r()}),500);return{value:t,searchItems:n}}};const H=(0,v.Z)(N,[["render",P]]);var I=H,W={components:{CurrencyItem:x,ListSearch:I},setup(){const e=(0,o.oR)(),t=(0,a.Fl)((()=>e.getters["list/valuteList"]));return{items:t}}};const Z=(0,v.Z)(W,[["render",_]]);var K=Z;const S={class:"converter"},T={class:"converter__item item"},Y={class:"converter__item item"};function $(e,t,r,n,i,o){const u=(0,a.up)("converter-select"),l=(0,a.up)("converter-input");return(0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",T,[(0,a.Wm)(u,{ind:0}),(0,a.Wm)(l,{ind:0})]),(0,a._)("button",{class:"converter__btn item__btn",onClick:t[0]||(t[0]=(...e)=>n.swap&&n.swap(...e))}),(0,a._)("div",Y,[(0,a.Wm)(u,{ind:1}),(0,a.Wm)(l,{ind:1})])])}const z=["value"];function M(e,t,r,i,o,u){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.select=e),onChange:t[1]||(t[1]=(...e)=>i.change&&i.change(...e)),class:"select"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.options,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.code,value:e.code},(0,b.zw)(e.name),9,z)))),128))],544)),[[n.bM,i.select]])}var E={props:{ind:{type:Number,required:!0}},setup(e){const t=(0,o.oR)(),r=0===e.ind?1:0,n=(0,a.Fl)((()=>t.state.converter.pair)),i=(0,a.Fl)((()=>t.getters["converter/options"].filter((e=>e.code!==n.value[r])))),u=(0,a.Fl)((()=>n.value[e.ind])),l=(0,U.iH)(`${u.value}`);function s(){t.commit("converter/changePair",[e.ind,l.value])}return(0,a.YP)((()=>u.value),(()=>{l.value=u.value})),{options:i,select:l,change:s}}};const q=(0,v.Z)(E,[["render",M]]);var A=q;const J={class:"input"},G=["disabled"];function X(e,t,r,i,o,u){return(0,a.wg)(),(0,a.iD)("label",J,[(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),onInput:t[1]||(t[1]=(...e)=>i.input&&i.input(...e)),disabled:1===r.ind},null,40,G),[[n.nr,i.value]]),(0,a.Uk)(" "+(0,b.zw)(i.label),1)])}var B={props:{ind:{type:Number,required:!0}},setup(e){const t=(0,o.oR)(),r=(0,a.Fl)((()=>t.state.converter.inputValue)),n=(0,a.Fl)((()=>t.getters["converter/nominal"])),i=(0,a.Fl)((()=>t.getters["converter/target"])),u=(0,a.Fl)((()=>(n.value.value/i.value.value).toFixed(4))),l=(0,a.Fl)((()=>(i.value.value/n.value.value).toFixed(4))),s=(0,a.Fl)((()=>r.value>0?(u.value*r.value).toFixed(4):0)),c=0===e.ind?(0,U.iH)(r.value):(0,U.iH)(s),v=(0,a.Fl)((()=>`1 ${n.value.CharCode} = ${u.value} ${i.value.CharCode}`)),p=(0,a.Fl)((()=>`1 ${i.value.CharCode} = ${l.value} ${n.value.CharCode}`)),d=0===e.ind?v:p;let m;const f=j((e=>{""===c.value&&(c.value=0),0===m&&(e.target.value=c.value),t.commit("converter/changeInputValue",c.value),m=c.value}),500);return{value:c,input:f,label:d}}};const Q=(0,v.Z)(B,[["render",X]]);var ee=Q,te={components:{ConverterSelect:A,ConverterInput:ee},setup(){const e=(0,o.oR)();function t(){e.commit("converter/swapPair")}return(0,a.bv)((()=>e.dispatch("converter/initPair"))),{swap:t}}};const re=(0,v.Z)(te,[["render",$]]);var ne=re;const ae=[{name:"list",path:"/",component:K},{name:"converter",path:"/converter",component:ne}],ie=(0,w.p7)({history:(0,w.PO)("/cbrvue/"),routes:ae});var oe=ie;r(6699);const ue={namespaced:!0,state:{filteredList:[],filter:!1},getters:{valuteList(e,t,r){return e.filter?e.filteredList:r.valute}},mutations:{filterList(e,[t,r]){r.length?(e.filteredList=t.filter((e=>e.Name.toLowerCase().includes(r)||e.CharCode.toLowerCase().startsWith(r))),e.filter=!0):(e.filteredList=[],e.filter=!1)}},actions:{filterList({commit:e,rootState:t},r){e("filterList",[t.valute,r.toLowerCase()])}}};async function le(){let e=null;try{e=await fetch("http://ip-api.com/json"),e=await e.json(),e=e.countryCode.toUpperCase()}catch(r){console.error(r)}const t=navigator.language.slice(0,2).toUpperCase();return{code:e,lang:t}}const se={namespaced:!0,state:{pair:[],rur:{CharCode:"RUR",Name:"Росийский рубль",Previous:1,Value:1,prevRatio:1,prevValue:1,ratio:1,value:1},inputValue:1},getters:{options(e,t,r){let n=[...r.valute].concat([e.rur]);return n=n.map((e=>({code:e.CharCode,name:e.Name}))),n},nominal(e,t,r){return[...r.valute].find((t=>t.CharCode===e.pair[0]))||e.rur},target(e,t,r){return[...r.valute].find((t=>t.CharCode===e.pair[1]))||e.rur}},mutations:{changePair(e,[t,r]){e.pair[t]=r},changeInputValue(e,t){e.inputValue=t},setPair(e,t){e.pair=t},swapPair(e){const t=[...e.pair];e.pair=t.reverse()}},actions:{async initPair({commit:e,getters:t}){const r=e=>a.find((t=>t.startsWith(e))),n=await le(),a=[...t.options].map((e=>e.code)),i=r(n.code)||r(n.lang)||"EUR",o="EUR"===i?"USD":"EUR",u=[i,o];e("setPair",u)}}};var ce=(0,o.MT)({state:{valute:[],names:{AMD:"Армянский драм",HUF:"Венгерский форинт",HKD:"Гонконгский доллар",DKK:"Датская крона",INR:"Индийская рупия",KZT:"Казахстанский тенге",KGS:"Киргизский сом",CNY:"Китайский юань",MDL:"Молдавский лей",NOK:"Норвежская крона",TJS:"Таджикский сомони",TRY:"Турецкая лира",UZS:"Узбекский сум",UAH:"Украинская гривна",CZK:"Чешская крона",SEK:"Шведская крона",ZAR:"Южноафриканский рэнд",KRW:"Вон Республики Корея",JPY:"Японская иена"}},mutations:{setValute(e,t){const r=Object.values(t.Valute).filter((e=>"XDR"!==e.CharCode));r.forEach((t=>{t.value=(t.Value/t.Nominal).toFixed(4),t.prevValue=(t.Previous/t.Nominal).toFixed(4),t.ratio=(1/t.value).toFixed(4),t.prevRatio=(1/t.prevValue).toFixed(4),t.Nominal>1&&(t.Name=e.names[`${t.CharCode}`])})),e.valute=r}},actions:{async loadValute({commit:e}){try{const t=await fetch("https://www.cbr-xml-daily.ru/daily_json.js"),r=await t.json();e("setValute",r)}catch(t){console.log(t)}}},modules:{list:ue,converter:se}});(0,n.ri)(g).use(ce).use(oe).mount("#app")}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(t,n,a,i){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],i=e[c][2];for(var u=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(u=!1,i<o&&(o=i));if(u){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,a,i]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,o=n[0],u=n[1],l=n[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(a in u)r.o(u,a)&&(r.m[a]=u[a]);if(l)var c=l(r)}for(t&&t(n);s<o.length;s++)i=o[s],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},n=self["webpackChunkcbrvue"]=self["webpackChunkcbrvue"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(1364)}));n=r.O(n)})();
//# sourceMappingURL=app.1e4eaed4.js.map